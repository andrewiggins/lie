!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Promise=e()}(this,function(){"use strict";function t(){}function e(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=m,this.queue=[],this.outcome=void 0,e!==t&&f(this,e)}function n(t,e,n){return{fulfill:function(n){"function"==typeof e?r(t,e,n):o(t,n)},reject:function(e){"function"==typeof n?r(t,n,e):u(t,e)}}}function r(t,e,n){p(function(){var r;try{r=e(n)}catch(e){return u(t,e)}r===t?u(t,new TypeError("Cannot resolve promise with itself")):o(t,r)})}function o(t,e){var n=c(i,e);if("error"===n.status)return u(t,n.value);var r=n.value;if(r)f(t,r);else{t.state=y,t.outcome=e;for(var o=-1,s=t.queue.length;++o<s;)t.queue[o].fulfill(e)}return t}function u(t,e){t.state=v,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].reject(e);return t}function i(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(t,e){function n(e){f||(f=!0,u(t,e))}function r(e){f||(f=!0,o(t,e))}function i(){e(r,n)}var f=!1,s=c(i);"error"===s.status&&n(s.value)}function c(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}function s(e){return e instanceof this?e:o(new this(t),e)}function a(e){return u(new this(t),e)}function h(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);for(var f=new Array(r),c=0,s=-1,a=new this(t);++s<r;)!function(t,e){n.resolve(t).then(function(t){f[e]=t,++c!==r||i||(i=!0,o(a,f))},function(t){i||(i=!0,u(a,t))})}(e[s],s);return a}function l(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);for(var f=-1,c=new this(t);++f<r;)!function(t){n.resolve(t).then(function(t){i||(i=!0,o(c,t))},function(t){i||(i=!0,u(c,t))})}(e[f]);return c}var p=setTimeout,v=1,y=2,m=3;return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.then=function(o,u){if("function"!=typeof o&&this.state===y||"function"!=typeof u&&this.state===v)return this;var i=new e(t);if(this.state!==m){r(i,this.state===y?o:u,this.outcome)}else this.queue.push(n(i,o,u));return i},e.resolve=s,e.reject=a,e.all=h,e.race=l,e});
