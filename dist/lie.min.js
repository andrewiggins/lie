!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Promise=e()}(this,function(){"use strict";function t(){}function e(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,e!==t&&u(this,e)}function r(t,e,r){return{fulfill:function(r){"function"==typeof e?n(t,e,r):h.resolve(t,r)},reject:function(e){"function"==typeof r?n(t,r,e):h.reject(t,e)}}}function n(t,e,r){l(function(){var n;try{n=e(r)}catch(e){return h.reject(t,e)}n===t?h.reject(t,new TypeError("Cannot resolve promise with itself")):h.resolve(t,n)})}function o(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function u(t,e){function r(e){u||(u=!0,h.reject(t,e))}function n(e){u||(u=!0,h.resolve(t,e))}function o(){e(n,r)}var u=!1,c=i(o);"error"===c.status&&r(c.value)}function i(t,e){var r={};try{r.value=t(e),r.status="success"}catch(t){r.status="error",r.value=t}return r}function c(e){return e instanceof this?e:h.resolve(new this(t),e)}function f(e){var r=new this(t);return h.reject(r,e)}function s(e){var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,o=!1;if(!n)return this.resolve([]);for(var u=new Array(n),i=0,c=-1,f=new this(t);++c<n;)!function(t,e){r.resolve(t).then(function(t){u[e]=t,++i!==n||o||(o=!0,h.resolve(f,u))},function(t){o||(o=!0,h.reject(f,t))})}(e[c],c);return f}function a(e){var r=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,o=!1;if(!n)return this.resolve([]);for(var u=-1,i=new this(t);++u<n;)!function(t){r.resolve(t).then(function(t){o||(o=!0,h.resolve(i,t))},function(t){o||(o=!0,h.reject(i,t))})}(e[u]);return i}var l=setTimeout,h={},v=3;return e.prototype.catch=function(t){return this.then(null,t)},e.prototype.then=function(e,o){if("function"!=typeof e&&2===this.state||"function"!=typeof o&&1===this.state)return this;var u=new this.constructor(t);if(this.state!==v){n(u,2===this.state?e:o,this.outcome)}else this.queue.push(r(u,e,o));return u},h.resolve=function(t,e){var r=i(o,e);if("error"===r.status)return h.reject(t,r.value);var n=r.value;if(n)u(t,n);else{t.state=2,t.outcome=e;for(var c=-1,f=t.queue.length;++c<f;)t.queue[c].fulfill(e)}return t},h.reject=function(t,e){t.state=1,t.outcome=e;for(var r=-1,n=t.queue.length;++r<n;)t.queue[r].reject(e);return t},e.resolve=c,e.reject=f,e.all=s,e.race=a,e});
