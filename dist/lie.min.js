!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Promise=t()}(this,function(){"use strict";function e(){}function t(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=p,this.queue=[],this.outcome=void 0,t!==e&&i(this,t)}function r(e,t,r){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof r&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}function n(e,t,r){a(function(){var n;try{n=t(r)}catch(t){return h.reject(e,t)}n===e?h.reject(e,new TypeError("Cannot resolve promise with itself")):h.resolve(e,n)})}function o(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function i(e,t){function r(t){i||(i=!0,h.reject(e,t))}function n(t){i||(i=!0,h.resolve(e,t))}function o(){t(n,r)}var i=!1,c=u(o);"error"===c.status&&r(c.value)}function u(e,t){var r={};try{r.value=e(t),r.status="success"}catch(e){r.status="error",r.value=e}return r}function c(t){return t instanceof this?t:h.resolve(new this(e),t)}function s(t){var r=new this(e);return h.reject(r,t)}function f(t){var r=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,o=!1;if(!n)return this.resolve([]);for(var i=new Array(n),u=0,c=-1,s=new this(e);++c<n;)!function(e,t){r.resolve(e).then(function(e){i[t]=e,++u!==n||o||(o=!0,h.resolve(s,i))},function(e){o||(o=!0,h.reject(s,e))})}(t[c],c);return s}function l(t){var r=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,o=!1;if(!n)return this.resolve([]);for(var i=-1,u=new this(e);++i<n;)!function(e){r.resolve(e).then(function(e){o||(o=!0,h.resolve(u,e))},function(e){o||(o=!0,h.reject(u,e))})}(t[i]);return u}var a=setTimeout,h={},p=3;return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.then=function(t,o){if("function"!=typeof t&&2===this.state||"function"!=typeof o&&1===this.state)return this;var i=new this.constructor(e);if(this.state!==p){n(i,2===this.state?t:o,this.outcome)}else this.queue.push(new r(i,t,o));return i},r.prototype.callFulfilled=function(e){h.resolve(this.promise,e)},r.prototype.otherCallFulfilled=function(e){n(this.promise,this.onFulfilled,e)},r.prototype.callRejected=function(e){h.reject(this.promise,e)},r.prototype.otherCallRejected=function(e){n(this.promise,this.onRejected,e)},h.resolve=function(e,t){var r=u(o,t);if("error"===r.status)return h.reject(e,r.value);var n=r.value;if(n)i(e,n);else{e.state=2,e.outcome=t;for(var c=-1,s=e.queue.length;++c<s;)e.queue[c].callFulfilled(t)}return e},h.reject=function(e,t){e.state=1,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callRejected(t);return e},t.resolve=c,t.reject=s,t.all=f,t.race=l,t});
